const __vite__fileDeps=["assets/APlayer.min-CAgWaKXK.js","assets/commonjsHelpers-Cpj98o6Y.js"],__vite__mapDeps=i=>i.map(i=>__vite__fileDeps[i]);
import{h as M,s as v,i as b,l as h,_ as P,j as A,r as g,o as S,k as w,w as G,b as c,S as I,a as x}from"./app-Dvnd8qII.js";import E from"./MyIcon-DP8NM099.js";import{a as C}from"./axios-B4uVmeYG.js";import{_ as L}from"./plugin-vue_export-helper-DlAUqK2U.js";const B=M({__name:"NavMusic",setup(f,{expose:y}){y();let l,o=v(!1),a=[];const u=()=>{o.value=!o.value},i=()=>{o.value&&(o.value=!1)},d=()=>{const e=document.querySelector(".vp-navbar-end");if(!e)return;if(!document.querySelector("#MyMusic_Menu")){const s=document.createElement("div");s.id="MyMusic_Menu",s.classList.add("nav-item"),s.innerHTML='<div id="MyMusic_icon" class="btnImg"></div>',e.appendChild(s)}const t=document.querySelector("#MyMusic_Menu");t.onclick=s=>{u(),s.stopPropagation()};const n=document.querySelector(".MyMusic");n.onclick=s=>{s.stopPropagation()}},m=()=>{if(!l)return;const e=window,t=document.getElementById("GlobalAPlayer");!t||a.length<1||(r(),t.classList.contains("aplayer"))||(e.GlobalAPlayer=new l({container:document.getElementById("GlobalAPlayer"),audio:a,lrcType:3,listFolded:!1,listMaxHeight:"324px",mini:!1,fixed:!1,volume:1,storageName:"GlobalAPlayer"}),e.GlobalAPlayer.on("play",function(){r()}),e.GlobalAPlayer.on("pause",function(){r()}))};function r(){var t,n;const e=window;e.GlobalAPlayer&&e.GlobalAPlayer.mode&&(e.GlobalAPlayer.paused?(t=document.getElementById("MyMusic_icon"))==null||t.setAttribute("spin","false"):(n=document.getElementById("MyMusic_icon"))==null||n.setAttribute("spin","true"))}const _=e=>{C({method:"get",url:"//file.mo7.cc/music/list.json",params:{}}).then(t=>{var n=t.data;n&&n.length>0&&(a=n),console.log("加载音乐列表",a),e&&e()})};b(()=>{const e=h();_(()=>{P(()=>import("./APlayer.min-CAgWaKXK.js").then(t=>t.A),__vite__mapDeps([0,1])).then(t=>{A(()=>{l=t.default,d(),m(),window.document.body.onclick=()=>{i()}}),e.beforeEach(()=>{setTimeout(()=>{d(),m()},50)})})})});const p={get APlayer(){return l},set APlayer(e){l=e},get IsShow(){return o},set IsShow(e){o=e},get GlobalMusicList(){return a},set GlobalMusicList(e){a=e},SwitchStatus:u,CloseStatus:i,InsertMenu:d,NewPlayer:m,AddBtnSpin:r,LoadMusicList:_,MyIcon:E};return Object.defineProperty(p,"__isScriptSetup",{enumerable:!1,value:!0}),p}}),k={class:"MyMusic"},N=c("div",{id:"GlobalAPlayer"},null,-1);function T(f,y,l,o,a,u){const i=g("ClientOnly");return S(),w(i,null,{default:G(()=>[c("div",k,[c("div",{class:I(["MyMusic_Play",{hide:!o.IsShow}])},[c("div",{class:"close",onClick:o.CloseStatus},[x(o.MyIcon,{name:"guanbi"})]),N],2)])]),_:1})}const W=L(B,[["render",T],["__file","NavMusic.vue"]]);export{W as default};
